---
title: NEST - NestJS의 특징
feed: show
---

## Nest.js
### 장점
- Express 기반이라 익스프레스에서 쓰던 미들웨어들 다 쓸 수 있다.
	- Express는 미들웨어라는 이름만 붙어있고, 다양한 기능을 수행할 수 있다.
		- 개발자가 미들웨어들을 정확히 구분할 수 있어야 한다.
	- Nest는 구분이 잘 되어 있고, 각각의 기능들 / 코드의 역할이 명확하다.
- 모듈이라는 개념 하에, 이를 연결하여 하나의 어플리케이션을 만들 수 있다. [[NEST - Controller]]
	- 모듈간의 의존성이 명확하다.
		- A가 B에 의존하고 있으면 이를 import해주어야 하고, import하지 않으면 에러가 발생하는 등의 문제가 발생한다.
- 익스프레스에서 사용하지 않는 개념들을 새롭게 탐구할 수 있다.
- 핵심적인 것을 정리하면 다음과 같다.
	- 익스프레스보다 기능이 세분화되어 나누어져 있다.
		- 익스프레스는 미들웨어가 모든 것을 담당했다면 Nest.js는 미들웨어들이 기능들로 쪼개져 무슨 역할을 하는지 바로 알 수 있게 된다.
		[[NEST - loggerMiddleware, implements]] [[NEST - Controller]] 
		- dependency injection
			- 테스트할 때 편하게 된다.
	- 공식 문서가 잘 갖춰져 있다.

### Express와의 비교
- Nest.js는 기본적으로 Express 기반으로 동작한다.
- 익스프레스 코드를 잘 알아두면 Nest에서 비교될 수 있을 것이다.
	- 익스프레스에 비해 어떤 장 / 단점이 있는지 알아두면 좋을 것이다.

- Node 프로젝트에서는 Package.json을 먼저 확인해야 한다.
	- 어떤 패키지들이 사용되었는지 확인할 수 있다.
- Nest에서는 [[NEST - ORM]] 툴로 TypeORM을 사용한다.
	- Express에서는 sequelize를 사용했는데, 이는 TypeScript가 만드는 차이점이다.
- Node에선 mysql과 연결하기 위한 드라이버를 모듈로 가져와야 한다.
	- mysql2 모듈 자체가 데이터베이스인건 아니다.

- Express에선 App.js가 모든 모듈들을 관리하게 된다.
	- 이를 바탕으로 파일을 분리하여 여러가지 파일들을 사용하게 된다.
- Express는 Router를 사용하고, 이를 통해 파일을 분리해서 사용한다.

- 정적 파일 제공하는 등의 미들웨어들이 Nest.js에서 크게 달라지게 된다.
	- 이미지 업로드하면 접근할 수 있도록 해야 한다.
- Express에선 Passport를 통해 로그인 관리를 진행했다.
	- express-session만 있으면 로그인을 직접 구현할 수 있는데, 이걸 더 체계적으로 관리할 수 있다.
	- API 주소 안에 라우터 주소들이 들어가지게 된다.
	- API 주소가 아닌 다른 주소를 서버에 요청 보냈을 때 모두 react.js page로 제공하고, 통제권을 react로 넘긴다.
		- API와 API가 아닌 링크로 나뉘어 데이터를 제공하게 된다.

- 익스프레스는 구조가 자유롭고 컨벤션이 다르다.
- passport는 serialize user와 deseiralize user가 존재한다.
	- serialize user는 일부 데이터만 세션에 저장하는 것이다.
	- deserialize user는 매 요청마다 사용자 정보를 가져오도록 한다.
- passport local
	- id / password를 통해 로그인 하도록 하는 전략
		- 사용자를 찾고, 사용자가 없으면 존재하지 않는 이메일로 / 비밀번호 비교해서 비밀번호 일치하면 성공하도록 해준다.
		- passport를 사용하면 세션으로 바로 연결되어 저장될 수 있다는 점이 편리하다.
	- node의 인증 라이브러리 표준이다.

- [[NEST - ORM]]을 사용해도 실무에서는 쿼리를 사용해야 하는 경우가 발생한다.
	- 쿼리 작성하면 문법이 크게 달라 문제가 발생할 수 있다.
	- ORM을 사용하면서 동시에 성능상 문제로 인해 쿼리를 동시에 사용하는 투트랙을 사용한다.
	- ORM을 사용하면 성능을 희생하더라도 가독성을 살릴 수 있어 좋다.

- 공식 문서를 읽어 use case를 충분히 익힐 필요가 있다.
	- 공식 문서와 실제 케이스가 다를 수 있다.
	- 강좌에 없는 다양한 메서드들이 있을 수 있다.

- 익스프레스에서의 미들웨어는 요청과 응답을 조작해주는 역할을 한다.
	- 모듈화를 통해 자주 사용하는 곳에서 반복적으로 사용할 수 있도록 할 수 있다.
- multer라는 미들웨어를. 통해 아마존 S3로 바로 올리거나 할 수 있다.
- Express에서 사용되는 것들이 어떻게 달라지는지 확인해보면 좋다.
	- 똑같은 용도의 코드들이 어떻게 다르게 바뀌는지를 확인하면 좋다.
	
- Express에서는 작동을 위해 (req, res, next)로 함수를 정의하여 동작시킨다.
	- nest에서는 요청과 응답을 모르더라도 처리할 수 있도록 작동한다. [[NEST - Controller]]
		- 세대 차이로 인한 설계 진화가 있다.
- 